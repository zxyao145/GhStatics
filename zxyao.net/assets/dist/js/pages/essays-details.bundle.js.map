{"version":3,"sources":["webpack://blogz/./src/scss/components/_essay-style.scss?5b90","webpack://blogz/./src/scss/components/commentZ.scss?7298","webpack://blogz/./src/scss/pages/essays-details.scss?8384","webpack://blogz/./common/tinyMceConfig.js","webpack://blogz/./common/TinyMceHelper.ts","webpack://blogz/./common/extensions/global.ts","webpack://blogz/./common/util.ts","webpack://blogz/./src/ts/common/global.ts","webpack://blogz/./src/ts/components/comment/CommentZ.ts","webpack://blogz/./src/ts/pages/essays-details.ts","webpack://blogz/external \"tinymce\"","webpack://blogz/webpack/bootstrap","webpack://blogz/webpack/runtime/define property getters","webpack://blogz/webpack/runtime/hasOwnProperty shorthand","webpack://blogz/webpack/runtime/make namespace object","webpack://blogz/webpack/startup"],"names":[],"mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"js/pages/essays-details.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","/// <reference path=\"../libs/tinymce/5.2.0/plugins/lineheight/plugin.min.js\" />\r\n/// <reference path=\"../libs/tinymce/5.2.0/plugins/lineheight/plugin.min.js\" />\r\n\r\nconst editorUpApi = {\r\n    comment: {\r\n        image: '/api/Editor/CommentImg',\r\n        file: '/api/Editor/CommentFile'\r\n    },\r\n    blog: {\r\n        image: '/api/Editor/BlogImg',\r\n        file: '/api/Editor/BlogFile'\r\n    }\r\n}\r\n\r\nconst cdn = \"https://cdn.jsdelivr.net/gh/zxyao145/JsDelivr@202206237/zxyao.net/assets\";;\r\n\r\n\r\nconst tinymceUploadConfig = {\r\n    file: {\r\n        uploadUrl: 'TinyUploadFile',\r\n        accept: [\r\n            {\r\n                title: '文档',\r\n                extensions: 'doc,docx,xls,xlsx,ppt,pptx,pdf',\r\n                mimeTypes:\r\n                    'application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,' +\r\n                        'application/vnd.ms-excel,application/x-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,' +\r\n                        'application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,' +\r\n                        'application/pdf'\r\n            },\r\n            {\r\n                title: '压缩文件',\r\n                extensions: 'rar,zip,7z',\r\n                mimeTypes: 'application/octet-stream,application/x-zip-compressed,.7z'\r\n            },\r\n            {\r\n                title: '图片',\r\n                extensions: 'gif,jpg,jpeg,bmp,png',\r\n                mimeTypes: 'image/gif,image/jpeg,image/bmp,image/png'\r\n            },\r\n            {\r\n                title: '音视频',\r\n                extensions: 'flv,mkv,mp4,webm,mp3,wav',\r\n                mimeTypes: 'audio/wav,audio/mpeg,video/flv,video/mkv,video/mp4,video/webm'\r\n            }\r\n        ]\r\n    },\r\n    image: {\r\n        uploadUrl: 'TinyUploadImage',\r\n        accept: [\r\n            {\r\n                title: '图片',\r\n                extensions: 'gif,jpg,jpeg,bmp,png',\r\n                mimeTypes: 'image/gif,image/jpeg,image/bmp,image/png'\r\n            }\r\n        ]\r\n\r\n    },\r\n    media: {\r\n        uploadUrl: 'TinyUploadVideo',\r\n        accept: [\r\n            {\r\n                title: '音视频',\r\n                extensions: 'flv,mkv,mp4,webm,mp3,wav',\r\n                mimeTypes: 'audio/wav,audio/mpeg,video/flv,video/mkv,video/mp4,video/webm'\r\n            }\r\n        ]\r\n    }\r\n};\r\n\r\nconst tinyMceUploadImage = function (url, blobInfo, success, failure, basePath = \"\") {\r\n    var xhr, formData;\r\n    xhr = new XMLHttpRequest();\r\n    xhr.withCredentials = false;\r\n    xhr.open('POST', url);\r\n    xhr.onload = function () {\r\n        var json;\r\n        if (xhr.status != 200) {\r\n            failure('HTTP Error: ' + xhr.status);\r\n            return;\r\n        }\r\n        json = JSON.parse(xhr.responseText);\r\n\r\n        if (!json || typeof json.Data.Url != 'string') {\r\n            failure('Invalid JSON: ' + xhr.responseText);\r\n            return;\r\n        }\r\n        success(basePath + json.Data.Url);\r\n    };\r\n    formData = new FormData();\r\n    var file = blobInfo.blob();\r\n    formData.append('file', file, blobInfo.filename());\r\n    xhr.send(formData);\r\n};\r\n\r\nconst tinyMceFileBrowserCallback = function (field_name, url, type, win) {\r\n    var uploadConfig;\r\n    var titleInputOff = 0;\r\n    switch (type) {\r\n        case 'file':\r\n            uploadConfig = tinymceUploadConfig.file;\r\n            titleInputOff = 1;\r\n            break;\r\n        case 'image':\r\n            uploadConfig = tinymceUploadConfig.image;\r\n            titleInputOff = 1;\r\n            break;\r\n        case 'media':\r\n            uploadConfig = tinymceUploadConfig.media;\r\n            titleInputOff = 0;\r\n            break;\r\n        default:\r\n            uploadConfig = tinymceUploadConfig.file;\r\n            titleInputOff = 0;\r\n    }\r\n    var allmimeTypes = '';\r\n    $.each(uploadConfig.accept, function (index, item) {\r\n        allmimeTypes += item.mimeTypes + ',';\r\n    });\r\n    var input = document.createElement('input');\r\n    input.setAttribute('type', 'file');\r\n    input.setAttribute('accept', allmimeTypes);\r\n    input.onchange = function () {\r\n        var file = this.files[0];\r\n        \r\n        var xhr, formData;\r\n        xhr = new XMLHttpRequest();\r\n        xhr.withCredentials = false;\r\n        xhr.open('POST', url);\r\n        xhr.onload = function () {\r\n            var json;\r\n            if (xhr.status != 200) {\r\n                failure('HTTP Error: ' + xhr.status);\r\n                return;\r\n            }\r\n            json = JSON.parse(xhr.responseText);\r\n\r\n            if (!json  ) {\r\n                failure('Invalid JSON: ' + xhr.responseText);\r\n                return;\r\n            }\r\n            //success\r\n            var files = json.Data;\r\n\r\n            {\r\n                win.document.getElementById(field_name).value =\r\n                    '/Services/FileService.ashx?Action=Get&Name=' + files[0].url;\r\n                if (titleInputOff == 0) return;\r\n                var inputlist = win.document.getElementsByTagName('input');\r\n                for (var i = 0; i < inputlist.length; i++) {\r\n                    if (inputlist[i].id == field_name) {\r\n                        if (i + titleInputOff < inputlist.length)\r\n                            inputlist[i + titleInputOff].value = files[0].fileName;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        formData = new FormData();\r\n        formData.append('file', file, blobInfo.filename());\r\n        xhr.send(formData);\r\n    };\r\n    input.click();\r\n};\r\n\r\nconst filePickerCallback = function (url, callback, value, meta) {\r\n    var uploadConfig;\r\n    var type = meta.filetype;\r\n    switch (type) {\r\n    case 'file':\r\n        uploadConfig = tinymceUploadConfig.file;\r\n        break;\r\n    case 'image':\r\n        uploadConfig = tinymceUploadConfig.image;\r\n        break;\r\n    case 'media':\r\n        uploadConfig = tinymceUploadConfig.media;\r\n        break;\r\n    default:\r\n        uploadConfig = tinymceUploadConfig.file;\r\n    }\r\n    var allmimeTypes = '';\r\n    $.each(uploadConfig.accept, function (index, item) {\r\n        allmimeTypes += item.mimeTypes + ',';\r\n    });\r\n\r\n    var input = document.createElement('input');\r\n    input.setAttribute('type', 'file');\r\n    input.setAttribute('accept', allmimeTypes);\r\n    input.onchange = function () {\r\n        var file = this.files[0];\r\n        var xhr, formData;\r\n        xhr = new XMLHttpRequest();\r\n        xhr.withCredentials = false;\r\n        xhr.open('POST', url);\r\n        xhr.onload = function () {\r\n            var json;\r\n            if (xhr.status != 200) {\r\n                failure('HTTP Error: ' + xhr.status);\r\n                return;\r\n            }\r\n            json = JSON.parse(xhr.responseText);\r\n            if (!json || typeof json.Data.Url != 'string') {\r\n                failure('Invalid JSON: ' + xhr.responseText);\r\n                return;\r\n            }\r\n            callback(json.Data.Url);\r\n        };\r\n        formData = new FormData();\r\n        formData.append('file', file, file.name);\r\n        xhr.send(formData);\r\n    }\r\n    input.click();\r\n}\r\n\r\n\r\nconst tinyMceConfig = {\r\n    \"basic\": {\r\n        plugins: [\r\n            'link image lists  hr anchor emoticons',\r\n            'searchreplace wordcount fullscreen insertdatetime media nonbreaking',\r\n            'save table contextmenu paste textcolor codesample'\r\n        ],\r\n        menubar: false,\r\n        statusbar: false,\r\n        toolbar:\r\n            'undo redo | removeformat | emoticons | bold italic underline strikethrough | forecolor backcolor | codesample blockquote | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table  hr',\r\n        paste_word_valid_elements: \"b,strong,i,em,h1,h2\",\r\n        image_advtab: true, //开启图片上传的高级选项功能\r\n        image_title: false, // 是否开启图片标题设置的选择，这里设置否\r\n        automatic_uploads: true, //开启点击图片上传时，自动进行远程上传操作\r\n        paste_data_images: true,\r\n        images_upload_handler:\r\n            function (blobInfo, success, failure) {\r\n                var url = editorUpApi.comment.image;\r\n                tinyMceUploadImage(url, blobInfo, success, failure, \"\");\r\n            },\r\n        file_picker_callback: function(callback, value, meta) {\r\n            var url = editorUpApi.comment.file;\r\n            filePickerCallback(url, callback, value, meta);\r\n        }\r\n    },\r\n    \"full\": {\r\n        plugins: [\r\n            'code link image lists hr anchor textpattern emoticons',\r\n            'searchreplace wordcount fullscreen insertdatetime media nonbreaking',\r\n            'save table contextmenu powerpaste textcolor lineheight indent2em codesample'\r\n        ],\r\n        external_plugins: {\r\n            'lineheight': cdn + '/libs/tinymce/5.2.0/plugins/lineheight/plugin.min.js',\r\n            'indent2em': cdn +'/libs/tinymce/5.2.0/plugins/indent2em/plugin.min.js',\r\n            'powerpaste': cdn + '/libs/tinymce/5.2.0/plugins/powerpaste/plugin.min.js',\r\n        },\r\n        //menubar: 'edit insert format table tools',\r\n        menubar: false,\r\n        toolbar:\r\n            'undo redo | pastetext | removeformat | formatselect fontselect fontsizeselect lineheightselect bold italic underline strikethrough | codesample blockquote | indent2em alignleft aligncenter alignright alignjustify | forecolor backcolor |  superscript subscript | bullist numlist  outdent indent | link image media table  hr | fullscreen code | emoticons',\r\n        paste_word_valid_elements: \"b,strong,i,em,h1,h2\",\r\n        image_advtab: true, //开启图片上传的高级选项功能\r\n        image_title: false, // 是否开启图片标题设置的选择，这里设置否\r\n        automatic_uploads: true, //开启点击图片上传时，自动进行远程上传操作\r\n\r\n        paste_data_images: true,\r\n        powerpaste_allow_local_images: true,\r\n        powerpaste_word_import: \"propmt\",\r\n        powerpaste_html_import: 'propmt',\r\n        images_upload_handler:\r\n            function (blobInfo, success, failure) {\r\n                var url = editorUpApi.blog.image;\r\n                tinyMceUploadImage(url, blobInfo, success, failure, \"\");\r\n            },\r\n        file_picker_callback: function (callback, value, meta) {\r\n            var url = editorUpApi.blog.file;\r\n            filePickerCallback(url, callback, value, meta);\r\n        },\r\n        file_browser_callback: function (field_name, url, type, win) {\r\n            tinyMceFileBrowserCallback(field_name, url, type, win);\r\n        },\r\n        //markdown\r\n        textpattern_patterns: [\r\n            { start: '#', format: 'h1' },\r\n            { start: '##', format: 'h2' },\r\n            { start: '###', format: 'h3' },\r\n            { start: '####', format: 'h4' },\r\n            { start: '#####', format: 'h5' },\r\n            { start: '######', format: 'h6' },\r\n            { start: '*', end: '*', format: 'italic' },\r\n            { start: '**', end: '**', format: 'bold' },\r\n            { start: '* ', cmd: 'InsertUnorderedList' },\r\n            { start: '- ', cmd: 'InsertUnorderedList' },\r\n            { start: '1. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'decimal' } },\r\n            { start: '1) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'decimal' } },\r\n            { start: 'a. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-alpha' } },\r\n            { start: 'a) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-alpha' } },\r\n            { start: 'i. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-roman' } },\r\n            { start: 'i) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-roman' } }\r\n        ]\r\n    }\r\n};\r\n\r\nexport default tinyMceConfig;","import * as tinymce from 'tinymce';\r\n// @ts-ignore TS7016\r\nimport * as tinyMceConfig from \"./tinyMceConfig.js\";\r\n\r\nconst cdn = \"https://cdn.jsdelivr.net/gh/zxyao145/JsDelivr@202206237/zxyao.net/assets\";\r\n\r\ninterface ITinyMceLoader {\r\n    init: (selector: string, tinymceType?: string,\r\n        height?: any | null, width?: any | null, otherConfig?: any | null, onReady?: (() => void) | null) => void;\r\n    setContent: (selector: string, content: string) => void;\r\n\r\n    getContent: (selector: string) => string | null;\r\n}\r\n\r\nconst primseHighLight = () => {\r\n    let allUeditorPreCode = $(\"#tinymce\");\r\n    allUeditorPreCode.each(function () {\r\n        var $this = $(this);\r\n        var classVal = $this.attr('class');\r\n        var classArr = classVal!.split(';');\r\n        classArr = classArr[0].split(':');\r\n        var lanClass = 'language-' + classArr[1];\r\n        $this.addClass(\"line-numbers\")\r\n            .css(\"white-space\", \"pre-wrap\");\r\n        $this.children('code').addClass(lanClass);\r\n\r\n        //var pre_content = '<code class=\"' + lan_class + '\">' + $(this).children('code').html() + '</code>';\r\n        //$(this).html(pre_content);\r\n    });\r\n    (<any>window).Prism.highlightAll();//js代码中调用此方法\r\n}\r\n\r\nconst safeSetContent = (editor: tinymce.Editor, content: string) => {\r\n    if (editor.initialized) {\r\n        editor.setContent(content);\r\n    } else {\r\n        window.setTimeout(() => {\r\n            safeSetContent(editor, content);\r\n        }, 2000);\r\n    }\r\n}\r\n\r\nvar tinyMceLoader: ITinyMceLoader = {\r\n    init: (selector = \"#tinyEditor\", tinymceType = \"basic\",\r\n        height = 440, width = \"100%\",\r\n        otherConfig = null,\r\n        onReady = null) => {\r\n\r\n        let lineheightFormats = \"1 1.25 1.4 1.5 1.75 1.8 2\";\r\n        if (tinymceType === 'full') {\r\n            lineheightFormats = '1 1.25 1.4 1.5 1.6 1.75 1.8 2 3 4 5';\r\n        }\r\n        var config: any = {\r\n            selector: selector,\r\n            init_instance_callback: (editor: any) => {\r\n                typeof onReady === 'function' && onReady();\r\n                //editor.setContent($(selector).val());\r\n                editor.on('blur',\r\n                    (e: any) => {\r\n                        $(selector).val(editor.getContent());\r\n                    });\r\n                //editor.execCommand(\"fontName\", false, \"Arial\");\r\n                //editor.execCommand(\"fontSize\", false, \"12pt\");\r\n            },\r\n            language: 'zh_CN',\r\n            language_url: cdn + '/libs/tinymce/5.2.0/langs/zh_CN.js',\r\n            width: width,\r\n            height: height,\r\n            theme: 'silver',\r\n            relative_urls: false,\r\n            browser_spellcheck: false,\r\n            fontsize_formats: \"8pt 10pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 28pt 20pt 36pt\",\r\n            font_formats:\r\n                \"Times New Roman=times new roman,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;微软雅黑='微软雅黑';宋体='宋体';黑体='黑体';仿宋='仿宋';楷体='楷体';隶书='隶书'\",\r\n            lineheight_formats: lineheightFormats,\r\n            paste_enable_default_filters: true,\r\n            //prism js language list\r\n            codesample_languages: [\r\n                { text: 'C#', value: 'csharp' },\r\n                { text: 'HTML/XML', value: 'markup' },\r\n                { text: 'JavaScript', value: 'javascript' },\r\n                { text: 'TypeScript', value: 'ts' },\r\n                { text: 'Scss', value: 'scss' },\r\n                { text: 'Python', value: 'python' },\r\n                { text: 'Java', value: 'java' },\r\n                { text: 'Markdown', value: 'md' },\r\n                { text: 'YAML', value: 'yml' },\r\n                { text: 'JSON', value: 'json' },\r\n                { text: 'SQL', value: 'sql' },\r\n                { text: 'Bash', value: 'bash' },\r\n                { text: 'C', value: 'c' },\r\n                { text: 'C++', value: 'cpp' }\r\n            ],\r\n        };\r\n        if (otherConfig) {\r\n            $.extend(config, otherConfig);\r\n        }\r\n        $.extend(config, (<any>tinyMceConfig)[tinymceType]);\r\n        tinymce.init(config);\r\n    },\r\n\r\n\r\n    setContent: (content: string, selector: string = \"tinyEditor\") => {\r\n        safeSetContent(tinymce.get(selector), content);\r\n    },\r\n\r\n    getContent: (selector: string = \"tinyEditor\") => {\r\n        let editor = tinymce.get(selector);\r\n        if (editor.initialized) {\r\n            return editor.getContent();\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n};\r\n\r\nexport default tinyMceLoader;","export { }\r\n\r\ndeclare global {\r\n    interface String {\r\n        isEmail(): boolean;\r\n        iso8601ToLocal(): string;\r\n        iso8601ToDate():Date;\r\n    }\r\n    interface Date {\r\n        format(fmt: string): string;\r\n    }\r\n\r\n    interface JQueryStatic {\r\n        cookie(key: string): any;\r\n        cookie(key: string, value: string): void;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nString.prototype.isEmail = function (this: string): boolean {\r\n    var email = this.replace(\" \", \"\");\r\n    var pattern = /^([\\w-.]+)@([\\w_-]+\\.)+([a-zA-Z0-9]+)/i;\r\n    var flag = pattern.test(email);\r\n    if (flag) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nString.prototype.iso8601ToLocal = function () {\r\n    let str = this.replace(/T/g, ' ');\r\n    return str;\r\n}\r\n\r\nDate.prototype.format = function (fmt) {\r\n    var o: any = {\r\n        \"M+\": this.getMonth() + 1, //月份 \r\n        \"d+\": this.getDate(), //日 \r\n        \"H+\": this.getHours(), //小时 \r\n        \"m+\": this.getMinutes(), //分 \r\n        \"s+\": this.getSeconds(), //秒 \r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度 \r\n        \"S\": this.getMilliseconds() //毫秒 \r\n    };\r\n    if (/(y+)/.test(fmt))\r\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n    for (var k in o) {\r\n        if (o.hasOwnProperty(k)) {\r\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) {\r\n                let okValue = o[k];\r\n                fmt = fmt.replace(RegExp.$1,\r\n                    (RegExp.$1.length === 1)\r\n                        ? okValue\r\n                        : ((\"00\" + okValue).substr((\"\" + okValue).length)));\r\n            }\r\n        }\r\n    }\r\n\r\n    return fmt;\r\n}\r\n\r\nString.prototype.iso8601ToDate = function () {\r\n    return new Date((this as string));\r\n}","const getIdByRoute = () => {\r\n    let pathInfo = location.pathname.split('/')\r\n        .filter((item: string) => {\r\n            if (item) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    return pathInfo[pathInfo.length-1];\r\n}\r\n\r\ninterface IUrlParamInfo {\r\n    keys: Array<string>,\r\n    params: {\r\n        [key: string]: string|Array<string>\r\n    },\r\n    get:(key:string)=> string|Array<string>,\r\n}\r\n\r\nconst pickUpUrlParams = () => {\r\n    let url = location.search; //获取url中\"?\"符后的字串 \r\n\r\n    let urlParamInfo: IUrlParamInfo = {\r\n        keys: [],\r\n        params: {},\r\n        get: (key: string) => {\r\n            return \"\";\r\n        }\r\n    };\r\n\r\n    if (url.indexOf(\"?\") !== -1) {\r\n        let str = url.substr(1);\r\n        let requestPairArr = str.split(\"&\");\r\n        let keyArr: Array<string> = [];\r\n        let params: {\r\n            [key: string]: string|Array<string>\r\n        } = {};\r\n        for (var i = 0; i < requestPairArr.length; i++) {\r\n            let paramPair = requestPairArr[i].split(\"=\");\r\n            let key = paramPair[0].toLocaleLowerCase();\r\n            if( params[key] ){\r\n                params[key] = [ (<string>params[key]) ,unescape(paramPair[1])]\r\n            }else{\r\n                params[key] = unescape(paramPair[1]);\r\n            }\r\n            \r\n            keyArr.push(key);\r\n        }\r\n        const get = (key: string) => {\r\n            let lowKey = key.toLocaleLowerCase();\r\n            if (keyArr.includes(lowKey)) {\r\n                return params[key];\r\n            } else {\r\n                return \"\";\r\n            }\r\n        }\r\n        urlParamInfo.keys = keyArr;\r\n        urlParamInfo.params = params;\r\n        urlParamInfo.get = get;\r\n    }\r\n    return urlParamInfo;\r\n}\r\n\r\n\r\ninterface Iutil {\r\n    \"getIdByRoute\": () => string,\r\n    \"pickUpUrlParams\": () => IUrlParamInfo,\r\n}\r\nconst util: Iutil = {\r\n    \"getIdByRoute\": getIdByRoute,\r\n    \"pickUpUrlParams\": pickUpUrlParams\r\n};\r\n\r\n\r\nexport default util;","interface IGlobal {\r\n    showLoading: (text?: string) => void;\r\n    hideLoading: () => void;\r\n    alert: (text:string, obj?: any)=>void;\r\n}\r\n\r\nconst Global: IGlobal = {\r\n\r\n    showLoading: (text = null) => {\r\n        let showText = \"加载中...\";\r\n        if (text) {\r\n            showText = text;\r\n        }\r\n\r\n        $(\"#gLoading .loading-text\").html(showText);\r\n        $(\"#gLoading\").css(\"display\", \"block\");\r\n    },\r\n\r\n    hideLoading: () => {\r\n        $(\"#gLoading\").css(\"display\", \"none\");\r\n    },\r\n\r\n    alert: (text, obj = null) => {\r\n        let defaultObj = {\r\n            time: 2000,\r\n            title:\"提示\"\r\n        }\r\n\r\n        if (obj) {\r\n            if (typeof obj === \"function\") {\r\n                //callback\r\n                (<any>window).layer.alert(text, defaultObj, obj);\r\n            } else {\r\n                $.extend(obj, defaultObj);\r\n                (<any>window).layer.alert(text, obj);\r\n            }\r\n        } else {\r\n            (<any>window).layer.alert(text, defaultObj);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Global;","import \"../../../../common/extensions/global\"\r\nimport tinyMceLoader from \"../../../../common/TinyMceHelper\";\r\nimport * as tinymce from \"tinymce\";\r\nimport \"../../../scss/components/commentZ.scss\";\r\n\r\ninterface ICommentZ {\r\n    Id?: string | number;\r\n    Img?: string;\r\n    Create?: string;\r\n    NickName: string;\r\n    Content: string;\r\n    Email: string;\r\n    IsSecret?: number;\r\n\r\n    ReplyId?: number | string;\r\n    ReplyName?: string;\r\n    ReplyBody?: ICommentZ[];\r\n}\r\n\r\ninterface ISetting {\r\n    selector: string,\r\n    editorConfig: any,\r\n\r\n    queryComments: (comment: CommentZ, page?: number, pageCommentSize?: number) => void;\r\n    paging: boolean,\r\n    pageCommentSize?: number;\r\n    commentSubmit: (comment: ICommentZ, callBack: (newComment: any) => void) => void;\r\n}\r\n\r\nclass CommentZ {\r\n\r\n    constructor(setting: ISetting) {\r\n        this.setting = setting;\r\n        this.page = 1;\r\n        if (this.setting.paging) {\r\n            if (!this.setting.pageCommentSize) {\r\n                this.setting.pageCommentSize = 10;\r\n            }\r\n        }\r\n        this.$showReplyBox = null;\r\n    }\r\n    page: number;\r\n    setting: ISetting;\r\n    $selectorDom: any = null;\r\n    $showReplyBox:any= null;\r\n\r\n    init() {\r\n        this.$selectorDom = $(this.setting!.selector);\r\n        let commentHtml =\r\n            `\r\n<div class=\"cz-container\">\r\n    <div class=\"row\">\r\n        <textarea id=\"cz-editor\"></textarea>\r\n    </div>\r\n    <div class=\"row cz-tool\" style=\"margin-top: 2rem;\">\r\n        <div class=\"col-md-5 col-sm-4 col-12 form-group\" style=\"line-height: 34px;\">\r\n            <input id=\"cz-nickName\" type=\"text\" required=\"required\" class=\"form-control\" placeholder=\"昵称(限长:8)\" maxlength=\"8\" />\r\n        </div>\r\n        <div class=\"col-md-5 col-sm-4 col-12 form-group\" style=\"line-height: 34px;\">\r\n            <input id=\"cz-email\" type=\"email\" required=\"required\" class=\"form-control\" placeholder=\"邮箱\" />\r\n        </div>\r\n\r\n        <div class=\"col-md-2 col-sm-4 col-12 form-group\">\r\n            <div class=\"pull-right\">\r\n                <button class=\"btn btn-primary pull-right\" id=\"cz-submit\">评论</button>\r\n            </div>\r\n            <div class=\"clearfix\"></div>\r\n        </div>\r\n    </div>\r\n    <div id=\"cz-comments\" class=\"mt-4\"></div>\r\n</div>`;\r\n        this.$selectorDom.html(commentHtml);\r\n        this.queryComments();\r\n        \r\n        tinyMceLoader.init(\"#cz-editor\", \"basic\", \"240\");\r\n        let that = this;\r\n\r\n        $(\"#cz-submit\").click((e) => {\r\n            e.preventDefault();\r\n            let content:string = tinymce.get('cz-editor').getContent();\r\n            let nickName: string = <string>$(\"#cz-nickName\", that.$selectorDom).val();\r\n            let email: string = <string>$(\"#cz-email\", that.$selectorDom).val();\r\n            let comment: ICommentZ = {\r\n                NickName: nickName,\r\n                Content: content,\r\n                Email: email,\r\n                Create :CommentZ.getNowDateFormat()\r\n            }\r\n            that.submitComment(comment, (newComment: ICommentZ) => {\r\n                //TODO 更新楼层\r\n                let createComment = that.createComment(newComment, '新');\r\n                $(\"#cz-comments\", that.$selectorDom).prepend(createComment);\r\n                this.clear();\r\n                \r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    clear() {\r\n        tinymce.get('cz-editor').setContent(\"\");\r\n        $(\"#cz-nickName\", this.$selectorDom).val(\"\");\r\n        $(\"#cz-email\", this.$selectorDom).val(\"\");\r\n    }\r\n\r\n    parseData(data: any) {\r\n        this.createComments(data);\r\n    }\r\n\r\n    createReplyComment(replyObj: ICommentZ) {\r\n        return `<div class=\"reply\" id='cz-${replyObj.Id}' data-id=\"${replyObj.Id}\">\r\n            <div class=\"cz-reply-name\"><a href=\"javascript:void(0)\">${replyObj.NickName}</a>:<a href=\"#cz-${replyObj.ReplyId}\">@${replyObj.ReplyName}</a></div>\r\n            <p>${replyObj.Content}</p>\r\n            <div class='reply-footer'><span>${replyObj.Create!.iso8601ToDate().format(\"yyyy-MM-dd HH:mm:ss\")}</span><span class=\"reply-list-btn\">回复</span></div>\r\n        </div>`;\r\n    }\r\n\r\n    createComment(comment: ICommentZ, index: number|string) {\r\n        let replyComments = '';\r\n        if (comment.ReplyBody !== null && comment.ReplyBody!.length > 0) {\r\n            let that = this;\r\n            replyComments = comment.ReplyBody!.map((item: any) => {\r\n                return that.createReplyComment(item);\r\n            }).join(' ');\r\n        }\r\n        let commentHtml = `<div class=\"comment-info\"  data-id=\"${comment.Id}\">\r\n            <div class=\"comment-left\">\r\n                <header class='hidden-sm hidden-xs'>\r\n                    <span><b>#${index}楼</b></span>\r\n                </header>\r\n            </div>\r\n            <div class=\"comment-right\" id='cz-${comment.Id}'>\r\n                <div class='cz-uname'>${comment.NickName}</div>\r\n                <div class=\"comment-content-header\"><span><i class=\"fa fa-clock-o\"></i> ${comment.Create!.iso8601ToDate().format(\"yyyy-MM-dd HH:mm:ss\")}</span></div>\r\n                <div class=\"content\">\r\n                    ${comment.Content}\r\n                </div>\r\n                <div class=\"comment-content-footer\">\r\n                    <div class=\"row\">                        \r\n                        <div class=\"col-12\"><span class=\"reply-btn\">回复</span></div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"reply-list\">${replyComments}</div>\r\n            </div>\r\n        </div>`;\r\n        return commentHtml;\r\n    }\r\n\r\n    createComments(comments: Array<ICommentZ>) {\r\n        let $czComments = $(\"#cz-comments\", this.$selectorDom);\r\n\r\n        let that = this;\r\n        let commentsContent = comments.map((item: ICommentZ, index: number) => {\r\n            return that.createComment(item, index+1);\r\n        }).join(\" \");\r\n\r\n        $czComments.html(commentsContent);\r\n\r\n        $czComments.find(\".reply-btn\").click(e => {\r\n            that.replyClick(e.target);\r\n        });\r\n        $czComments.find(\".reply-list-btn\").click(e => {\r\n            that.replyClick(e.target);\r\n        });\r\n    }\r\n\r\n    replyClick(element: any) {\r\n        let el = $(element);\r\n        let $replyBoxContainer = el.parent().parent();\r\n        let $newReplyBox = $replyBoxContainer.children(\".replybox\");\r\n\r\n        if ($newReplyBox.length > 0) {\r\n            if (this.$showReplyBox[0].isEqualNode($newReplyBox[0])) {\r\n                this.$showReplyBox.remove();\r\n                this.$showReplyBox = null;\r\n                tinymce.get(\"cz-reply-editor\").remove();\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            if (this.$showReplyBox !== null) {\r\n                this.$showReplyBox.remove();\r\n                this.$showReplyBox = null;\r\n                tinymce.get(\"cz-reply-editor\").remove();\r\n\r\n            }\r\n        }\r\n\r\n        let replyHtml = \r\n            `<div class='replybox'>\r\n                <textarea id='cz-reply-editor' cols='80' rows='50' placeholder='来说几句吧......' class='mytextarea'></textarea>\r\n                <div class=\"row cz-tool\">\r\n                    <div class=\"col-md-5 col-sm-4 col-12 form-group\" style=\"line-height: 34px;\">\r\n                        <input id=\"nickName2\" type=\"text\" required=\"required\" class=\"form-control\" placeholder=\"昵称(限长:8)\" maxlength=\"8\" data-cip-id=\"cz-nickName\">\r\n                    </div>\r\n                    <div class=\"col-md-5 col-sm-4 col-12 form-group\" style=\"line-height: 34px;\">\r\n                        <input id=\"ema2\" type=\"email\" required=\"required\" class=\"form-control\" placeholder=\"邮箱\" data-cip-id=\"cz-email\">\r\n                    </div>\r\n\r\n                    <div class=\"col-md-2 col-sm-4 col-12 form-group send-container\">\r\n                        <span class='send'>发送</span>\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n\r\n        var $replyHtml = $(replyHtml);\r\n        this.$showReplyBox = $replyHtml;\r\n\r\n        console.log(\"submit\");\r\n        $replyHtml.find(\".send\").click(e => {\r\n            let $this = $(e.target);\r\n\r\n            var content = tinymce.get(\"cz-reply-editor\").getContent();//$(\"#cz-reply-editor\").val();\r\n\r\n            var parentEl = $this.parents('.comment-right');\r\n            var nickName = $(\"#nickName2\").val();\r\n            var ema = <string>$(\"#ema2\").val();\r\n\r\n\r\n            var id: any, beReplyName: any;\r\n            console.log(el[0]);\r\n            if (el.hasClass(\"reply-list-btn\")) {\r\n                let $repltParent = el.parents(\".reply\");\r\n                id = $repltParent.data(\"id\");\r\n                beReplyName = $repltParent\r\n                    .children(\".cz-reply-name\")\r\n                    .children(\"a\").eq(0).text();\r\n            } else {\r\n                id = el.parents(\".comment-info\").data(\"id\");\r\n                beReplyName = el\r\n                    .parents(\".comment-right\")\r\n                    .children(\".cz-uname\")\r\n                    .text();\r\n            }\r\n            console.log(beReplyName);\r\n\r\n            var obj: ICommentZ = {\r\n                ReplyId: id,\r\n                Img: \"N\",\r\n                NickName: <string>nickName,\r\n                Content: <string>content,\r\n                Email: ema\r\n            };\r\n\r\n            this.submitComment(obj, (newComment: ICommentZ) => {\r\n                newComment.ReplyName = beReplyName;\r\n                console.log(this);\r\n                var replyString = this.createReplyComment(newComment);\r\n\r\n                $(\".replybox\").remove();\r\n                var $replyString = $(replyString);\r\n                $replyString.find(\".reply-list-btn:last\").click(() => {\r\n                    alert(\"不能回复自己\");\r\n                    return;\r\n                });\r\n                parentEl.find(\".reply-list\").append($replyString);\r\n            });\r\n        });\r\n\r\n        //评论回复事件\r\n        $replyBoxContainer.append($replyHtml);\r\n        tinyMceLoader.init(\"#cz-reply-editor\", \"basic\", 200);\r\n\r\n    }\r\n\r\n    submitComment(comment: ICommentZ, callBack?: (comment:ICommentZ)=> void) {\r\n        if (!comment.Content) {\r\n            alert(\"回复内容不能为空！\");\r\n            return;\r\n        }\r\n        if (!comment.NickName) {\r\n            alert(\"昵称不能为空！\");\r\n            return;\r\n        }\r\n        if (!comment.Email) {\r\n            alert(\"邮箱不能为空！\");\r\n            return;\r\n\r\n        }\r\n        if (!comment.Email.isEmail()) {\r\n            alert(\"邮箱格式不正确！\");\r\n            return;\r\n        }\r\n        if (!comment.Create) {\r\n            comment.Create = CommentZ.getNowDateFormat();\r\n        }\r\n        \r\n\r\n        this.setting.commentSubmit(comment,\r\n            (newComment: ICommentZ) => {\r\n                typeof callBack === \"function\" && callBack(newComment);\r\n            });\r\n    }\r\n\r\n    queryComments(page: number = 1) {\r\n        if (this.setting.paging) {\r\n            this.page = page;\r\n            this.setting.queryComments(this, page, this.setting.pageCommentSize);\r\n        } else {\r\n            this.setting.queryComments(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * Start 时间处理\r\n     */\r\n\r\n    static getNowDateFormat() {\r\n        var nowDate = new Date();\r\n        var year = nowDate.getFullYear();\r\n        var month = CommentZ.filterNum(nowDate.getMonth() + 1);\r\n        var day = CommentZ.filterNum(nowDate.getDate());\r\n        var hours = CommentZ.filterNum(nowDate.getHours());\r\n        var min = CommentZ.filterNum(nowDate.getMinutes());\r\n        var seconds = CommentZ.filterNum(nowDate.getSeconds());\r\n        return year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + min + \":\" + seconds;\r\n    }\r\n    static filterNum(num: any) {\r\n        if (num < 10) {\r\n            return \"0\" + num;\r\n        } else {\r\n            return num;\r\n        }\r\n    }\r\n\r\n    /**\r\n    *\r\n    * End 时间处理\r\n    */\r\n}\r\n\r\nexport { CommentZ, ICommentZ, ISetting };\r\nexport default CommentZ;","import \"../../../common/extensions/global\";\r\nimport util from \"../.././../common/util\";\r\nimport { CommentZ, ICommentZ, ISetting } from \"../components/comment/CommentZ\";\r\nimport Global from \"../common/global\";\r\n\r\nimport tinyMceConfig from \"../../../common/tinyMceConfig\";\r\n\r\nimport \"../../scss/pages/essays-details.scss\";\r\nimport \"../../scss/components/_essay-style.scss\";\r\n\r\n(() => {\r\n\r\n    let loadingCount = 0;\r\n    function hideLoading() {\r\n        loadingCount += 1;\r\n        if (loadingCount > 1) {\r\n            Global.hideLoading();\r\n        }\r\n    }\r\n    let id = util.getIdByRoute();\r\n\r\n\r\n    const getIFrame = () => {\r\n        var url = \"https://www.zxyao.net/Essays/Shared/\" + id;\r\n        var iframe = `<iframe src='${url}' frameborder='0'  width='100%' height='100%'></iframe>`;\r\n        return iframe;\r\n    }\r\n\r\n    let essayDtailsApi = \"/api/Essays/Details?slug=\";\r\n    const buildEssay = (essayData: any) => {\r\n\r\n        var tags = essayData.Tags.split('|').map((tag: any) => {\r\n            return `<span class=\"badge  badge-info\">${tag}</span>`;\r\n        }).join(' ');\r\n        let updateStr = \"\";\r\n        if (essayData.Create !== essayData.Modify) {\r\n            updateStr = \",&nbsp;&nbsp;更新于\" +\r\n                essayData.Modify\r\n                .iso8601ToDate().format(\"yyyy-MM-dd\");\r\n        }\r\n        let essay = `<article data-id='${essayData.Id}'>\r\n                <aside class=\"top\">\r\n                    <h3><strong>${essayData.Title}</strong></h3>`;\r\n\r\n        if (location.pathname.toLowerCase().indexOf('essays/shared/') > -1) {\r\n            essay += '<div style=\"margin-bottom:20px;margin-top:-10px;\">&copy; <b>半野</b> 原载于<a href=\"https://www.zxyao.net/Essays/Details/' + id +'\"> <b>www.zxyao.net</b></a></div>';\r\n        }\r\n\r\n        essay += `<span class=\"fa fa-bookmark\">${essayData.EssayType}</span>\r\n                    <span class=\"fa fa-tags\">\r\n                        ${tags}\r\n                    </span><br />\r\n                    <span class=\"fa fa-calendar\">\r\n                        写于${essayData.Create.iso8601ToDate().format(\"yyyy-MM-dd\") + updateStr}\r\n                    </span>\r\n                    <span class=\"fa fa-eye\">${essayData.ReadNum}</span>\r\n                </aside>\r\n                <section>${essayData.Content}</section>\r\n\r\n                <aside class=\"down\">\r\n                    <span class=\"fa fa-thumbs-o-up\">${essayData.Praise}</span>\r\n                    <span class=\"fa fa-thumbs-o-down\">${essayData.Criticize}</span>\r\n                    <span class=\"fa fa-share\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"${'点击复制：' + getIFrame()}\">转载</span>\r\n                </aside>\r\n            </article>`;\r\n        return essay;\r\n\r\n    }\r\n    const buildToc = (catalog: any) => {\r\n        if (catalog && catalog !== 'none') {\r\n            var aArr = catalog.split(\"</a>\");\r\n            return aArr.map((item: any) => {\r\n                let realA = item + \"</a>\";\r\n                return `<li>${realA}</li>`;\r\n            }).join(' ');\r\n        } else {\r\n            return '<li>本文没有目录</li>';\r\n        }\r\n    }\r\n    const buildSEO = (essayData: any) => {\r\n        $(\"head>title\").html(essayData.Title);\r\n\r\n        let keywordsContent = $(\"meta[name='keywords']\")\r\n            .attr(\"content\");\r\n        let newKeywordsContent = essayData.Tags.split(\"|\").join(\",\");\r\n        keywordsContent += `,${essayData.EssayType},${newKeywordsContent}`;\r\n        $(\"meta[name='keywords']\").attr(\"content\", keywordsContent);\r\n\r\n        $(\"meta[name='description']\").attr(\"content\", essayData.Introduce);\r\n        $(\"meta[name='title']\").attr(\"content\", essayData.Title);\r\n    }\r\n\r\n    const parseData = (data: any) => {\r\n        buildSEO(data);\r\n        let essay = buildEssay(data);\r\n        $(\"#essayDetails\").html(essay);\r\n        let toc = buildToc(data.Catalog);\r\n        $('#myNav').html(toc);\r\n        //editor to highlighjs\r\n        let allUeditorPreCode = $(\"#essayDetails pre[class^='brush']\");\r\n        allUeditorPreCode.each(function () {\r\n            var $this = $(this);\r\n\r\n            var classVal = $this.attr('class');\r\n            var classArr = classVal.split(';');\r\n            classArr = classArr[0].split(':');\r\n            var lanClass = 'language-' + classArr[1];\r\n            $this.addClass(\"line-numbers\")\r\n                .css(\"white-space\", \"pre-wrap\");\r\n            $this.children('code').addClass(lanClass);\r\n\r\n            //var pre_content = '<code class=\"' + lan_class + '\">' + $(this).children('code').html() + '</code>';\r\n            //$(this).html(pre_content);\r\n        });\r\n        \r\n        $(\"#essayDetails pre[class^='language']\").addClass(\"line-numbers\")\r\n        .css(\"white-space\", \"pre-wrap\");\r\n        (<any>window).Prism.highlightAll();//js代码中调用此方法\r\n\r\n        upOrDownEventBind(data.Id);\r\n        $('[data-toggle=\"tooltip\"]').tooltip();\r\n    }\r\n\r\n   \r\n    $.ajax({\r\n        type: \"get\",\r\n        url: essayDtailsApi + id,\r\n        success: (msg: any) => {\r\n            if (msg.Code === 0) {\r\n                parseData(msg.Data);\r\n            } else {\r\n                location.href = \"/Home/Error/404\";\r\n            }\r\n        },\r\n        complete: () => {\r\n            hideLoading();\r\n        }\r\n    });\r\n\r\n    function upOrDownEventBind(essayId: number | string) {\r\n        \r\n        let upOrDownApi = \"/api/Essays/UpOrDown\";\r\n        //赞和踩\r\n        $(\"#essayDetails .fa-thumbs-o-up\").click(() => {\r\n            upOrDown('up');\r\n        });\r\n        $(\"#essayDetails .fa-thumbs-o-down\").click(() => {\r\n            upOrDown('down');\r\n        });\r\n        $(\"#essayDetails .fa-share\").click(() => {\r\n            const input = document.createElement('input');\r\n            document.body.appendChild(input);\r\n            input.setAttribute('value', getIFrame());\r\n            input.select();\r\n            if (document.execCommand('copy')) {\r\n                document.execCommand('copy');\r\n                console.log('复制成功');\r\n            }\r\n            document.body.removeChild(input);\r\n        });\r\n\r\n        const submitData = (data: any, callback?:any)=>{\r\n            $.ajax({\r\n                url: upOrDownApi,\r\n                type: \"POST\",\r\n                data: <any>data,\r\n                complete() {\r\n                },\r\n                success(msg) {\r\n                }\r\n            });\r\n        }\r\n\r\n        function upOrDown(type: string) {\r\n            var key = \"Attitude\" + essayId;\r\n            var className = \".fa-thumbs-o-\" + type;//赞还是踩的类名\r\n            var value: number;//赞还是踩的数量\r\n            var cookie: any;//当前cookie json 字符串\r\n\r\n\r\n            if (!$.cookie(key)) {\r\n                submitData({ \"Id\": essayId, \"type\": type, \"oper\": \"p\" });\r\n                value = parseInt($(className).text()) + 1;\r\n                $(className).text(value);\r\n                cookie = '{\"type\":\"' + type + '\",\"value\":' + value + ',\"time\":1}';\r\n                $.cookie(key, cookie);\r\n\r\n            } else {\r\n                var ck = JSON.parse($.cookie(key));\r\n\r\n                //等于4的时候，再次执行就变成了5，即第三次机会已经使用\r\n                if (ck.time < 5) {\r\n                    if (ck.time % 2 === 1) {\r\n                        //ck.time % 2 === 1,意味着是取消表态，要求点击的必须是上次表态的按钮\r\n                        if (type === ck.type) {\r\n                            submitData({ \"Id\": essayId, \"type\": type, \"oper\": \"r\" });\r\n                            value = ck.value - 1;\r\n                        } else {\r\n                            alert(\"您已经表过态啦，可以再次点击取消赞或踩。\");\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        //(ck.time % 2) === 0 意味着是重新表态\r\n                        submitData({ \"Id\": essayId, \"type\": type, \"oper\": \"p\" });\r\n                        value = ck.value + 1;\r\n                    }\r\n\r\n                    $(className).text(value);\r\n                    cookie = '{\"type\":\"' + type + '\",\"value\":' + value + ',\"time\":' + (ck.time + 1) + '}';\r\n                    $.cookie(key, cookie);\r\n\r\n                } else {\r\n                    alert(\"最多只有三次更改的机会，您已经用完啦！\");\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    //评论操作\r\n    let commentsApi = \"/api/Essays/Comments?Id=\" + id;\r\n    let submitCommentApi = \"/api/Essays/SubmitComment\";\r\n    const queryEssayComments = (commentZ: CommentZ) => {\r\n        $.ajax({\r\n            type: \"get\",\r\n            url: commentsApi,\r\n            success: (msg: any) => {\r\n                if (msg.Code === 0) {\r\n                    commentZ.parseData(msg.Data);\r\n                }\r\n            },\r\n            complete: () => {\r\n                hideLoading();\r\n            }\r\n        });\r\n    }\r\n\r\n    const submitComment = (comment: any, callBack: (newComment: any) => void) => {\r\n        let formData = new FormData();\r\n        for (var prop in comment) {\r\n            if (comment.hasOwnProperty(prop)) {\r\n                formData.append(prop, comment[prop]);\r\n            }\r\n        }\r\n\r\n        formData.append(\"essayId\", id);\r\n        Global.showLoading(\"操作中...\");\r\n        $.ajax({\r\n            url: submitCommentApi,\r\n            type: 'post',\r\n            processData: false,\r\n            contentType: false,\r\n            data: <any>formData,\r\n            success: (msg: any) => {\r\n                if (msg.Code === 0) {\r\n                    typeof callBack === \"function\" && callBack(msg.Data);\r\n                }\r\n            },\r\n            complete() {\r\n                Global.hideLoading();\r\n                Global.alert(\"评论成功\");\r\n            }\r\n        });\r\n    }\r\n\r\n    let commentZSetting: ISetting = {\r\n        selector: \"#commentBox\",\r\n        editorConfig: tinyMceConfig[\"basic\"],\r\n        queryComments: queryEssayComments,\r\n        commentSubmit: submitComment,\r\n        paging:false\r\n    }\r\n\r\n    let commentZ = new CommentZ(commentZSetting);\r\n    commentZ.init();\r\n\r\n})();","module.exports = tinymce;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/ts/pages/essays-details.ts\");\n"],"sourceRoot":""}